{"version":3,"file":"JsEngine.js","sourceRoot":"","sources":["../../src/android/JsEngine.ts"],"names":[],"mappings":";;;AAGA,gEAAkE;AAGrD,QAAA,kBAAkB,GAAG,eAAe,CAAC;AACrC,QAAA,iBAAiB,GAAG,KAAK,CAAC;AAEhC,MAAM,uBAAuB,GAAiB,MAAM,CAAC,EAAE;IAC5D,OAAO,sCAAoB,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE;QAC3C,MAAM,CAAC,UAAU,GAAG,WAAW,CAAC,MAAM,EAAE,MAAM,CAAC,UAAU,CAAC,CAAC;QAC3D,OAAO,MAAM,CAAC;IAChB,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AALW,QAAA,uBAAuB,2BAKlC;AAEF,SAAgB,WAAW,CAAC,MAAmC;;IAC7D,OAAO,MAAA,MAAA,MAAM,CAAC,OAAO,0CAAE,QAAQ,mCAAI,yBAAiB,CAAC;AACvD,CAAC;AAFD,kCAEC;AAED,SAAgB,WAAW,CACzB,MAAmC,EACnC,gBAAkC;;IAElC,MAAM,YAAY,GAAG,gBAAgB,CAAC,SAAS,CAC7C,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,UAAU,IAAI,IAAI,CAAC,GAAG,KAAK,0BAAkB,CACpE,CAAC;IACF,MAAM,OAAO,GAAmB;QAC9B,IAAI,EAAE,UAAU;QAChB,GAAG,EAAE,0BAAkB;QACvB,KAAK,EAAE,MAAA,MAAA,MAAM,CAAC,OAAO,0CAAE,QAAQ,mCAAI,yBAAiB;KACrD,CAAC;IAEF,IAAI,YAAY,IAAI,CAAC,EAAE;QACrB,gBAAgB,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC;KAC1C;SAAM;QACL,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAChC;IAED,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AApBD,kCAoBC","sourcesContent":["import type { ExpoConfig } from '@expo/config-types';\n\nimport type { ConfigPlugin } from '../Plugin.types';\nimport { withGradleProperties } from '../plugins/android-plugins';\nimport type { PropertiesItem } from './Properties';\n\nexport const JS_ENGINE_PROP_KEY = 'expo.jsEngine';\nexport const DEFAULT_JS_ENGINE = 'jsc';\n\nexport const withJsEngineGradleProps: ConfigPlugin = config => {\n  return withGradleProperties(config, config => {\n    config.modResults = setJsEngine(config, config.modResults);\n    return config;\n  });\n};\n\nexport function getJsEngine(config: Pick<ExpoConfig, 'android'>) {\n  return config.android?.jsEngine ?? DEFAULT_JS_ENGINE;\n}\n\nexport function setJsEngine(\n  config: Pick<ExpoConfig, 'android'>,\n  gradleProperties: PropertiesItem[]\n): PropertiesItem[] {\n  const oldPropIndex = gradleProperties.findIndex(\n    prop => prop.type === 'property' && prop.key === JS_ENGINE_PROP_KEY\n  );\n  const newProp: PropertiesItem = {\n    type: 'property',\n    key: JS_ENGINE_PROP_KEY,\n    value: config.android?.jsEngine ?? DEFAULT_JS_ENGINE,\n  };\n\n  if (oldPropIndex >= 0) {\n    gradleProperties[oldPropIndex] = newProp;\n  } else {\n    gradleProperties.push(newProp);\n  }\n\n  return gradleProperties;\n}\n"]}